FROM musl_fn_macos_base
# # RUN git clone https://github.com/FindoraNetwork/platform.git /volume
# RUN git clone https://github.com/shaorongqiang/findora.git /volume
# RUN git checkout fix_remove_libsodium 
ENV WORK_DIR /volume
COPY . $WORK_DIR
WORKDIR $WORK_DIR
ENV OPENSSL_DIR /musl
RUN rustup target add x86_64-apple-darwin
RUN PATH="/opt/osxcross/target/bin:$PATH"
RUN CC=o64-clang
RUN CXX=o64-clang++
RUN cargo build -p finutils --release --target x86_64-apple-darwin

CMD ["sleep", "999999"]